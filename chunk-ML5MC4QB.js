import{a as k}from"./chunk-N2YIPYXF.js";import{a as F,b as p,c as E,d as D,e as _,f,g as N,j as V,k as G,p as M}from"./chunk-RPPOXTPC.js";import{a as L}from"./chunk-B5HERMYD.js";import{d as w,e as C}from"./chunk-NWWTS3XC.js";import"./chunk-4UPO2QOB.js";import{Ea as d,Gb as S,Pa as v,Ua as c,W as l,Y as g,Za as x,bb as e,cb as t,db as r,hb as b,ia as m,ja as u,mb as i,na as h,rb as y}from"./chunk-2I6WSUOP.js";function T(o,n){o&1&&(m(),e(0,"svg",20),r(1,"circle",21)(2,"path",22),t(),i(3," Signing in... "))}function j(o,n){o&1&&i(0," Sign in ")}var R=class o{authService=l(k);router=l(w);cdr=l(S);destroyRef=l(h);isLoading=!1;loginForm=new _({email:new f("",[p.required,p.email]),password:new f("",[p.required])});onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.authService.login(this.loginForm.value).pipe(L(this.destroyRef)).subscribe({next:n=>{this.isLoading=!1,this.cdr.markForCheck(),n.message==="success"&&(localStorage.setItem("token",n.token),this.authService.saveUserData(),this.router.navigate(["/products"]))},error:n=>{this.isLoading=!1,this.cdr.markForCheck(),alert(n.error.message||"Login failed")}}))}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=g({type:o,selectors:[["app-login"]],standalone:!0,features:[y],decls:34,vars:3,consts:[[1,"animate-fade-in"],[1,"mb-10","text-left"],[1,"text-4xl","font-bold","text-slate-900","tracking-tight","mb-3"],[1,"text-slate-500","text-lg"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"space-y-1"],[1,"block","text-sm","font-semibold","text-slate-700"],[1,"relative","group"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none","text-slate-400","group-focus-within:text-primary","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],["type","email","formControlName","email","placeholder","Enter your email",1,"w-full","pl-11","pr-4","py-3.5","bg-white","rounded-2xl","border","border-slate-200","focus:border-primary","focus:ring-4","focus:ring-primary/10","transition-all","outline-none","text-slate-900","placeholder:text-slate-400"],[1,"flex","justify-between"],["routerLink","/forgot-password",1,"text-xs","font-semibold","text-primary","hover:underline","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","pl-11","pr-4","py-3.5","bg-white","rounded-2xl","border","border-slate-200","focus:border-primary","focus:ring-4","focus:ring-primary/10","transition-all","outline-none","text-slate-900","placeholder:text-slate-400"],["type","submit",1,"w-full","py-4","rounded-2xl","bg-slate-900","text-white","font-bold","shadow-xl","shadow-slate-900/10","hover:bg-slate-800","active:scale-[0.98]","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"mt-10","text-center"],[1,"text-slate-500"],["routerLink","/register",1,"text-slate-900","font-bold","hover:underline","underline-offset-4","ml-1"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(s,a){s&1&&(e(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Welcome back"),t(),e(4,"p",3),i(5,"Please enter your details to sign in."),t()(),e(6,"form",4),b("ngSubmit",function(){return a.onSubmit()}),e(7,"div",5)(8,"label",6),i(9,"Email Address"),t(),e(10,"div",7)(11,"div",8),m(),e(12,"svg",9),r(13,"path",10),t()(),u(),r(14,"input",11),t()(),e(15,"div",5)(16,"div",12)(17,"label",6),i(18,"Password"),t(),e(19,"a",13),i(20,"Forgot?"),t()(),e(21,"div",7)(22,"div",8),m(),e(23,"svg",9),r(24,"path",14),t()(),u(),r(25,"input",15),t()(),e(26,"button",16),v(27,T,4,0)(28,j,1,0),t()(),e(29,"div",17)(30,"p",18),i(31,"Don't have an account? "),e(32,"a",19),i(33,"Create an account"),t()()()()),s&2&&(d(6),c("formGroup",a.loginForm),d(20),c("disabled",a.loginForm.invalid||a.isLoading),d(),x(a.isLoading?27:28))},dependencies:[M,N,F,E,D,V,G,C],changeDetection:0})};export{R as LoginComponent};
