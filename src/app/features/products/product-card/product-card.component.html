<div
    class="group relative bg-white rounded-2xl border border-slate-100 overflow-hidden hover:shadow-xl hover:shadow-primary/5 transition-all duration-300 hover:-translate-y-1 h-full flex flex-col">

    <!-- Image Container -->
    <div class="relative aspect-[4/5] overflow-hidden bg-slate-50">
        <img [ngSrc]="product.imageCover" width="400" height="500" [alt]="product.title"
            class="w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-110"
            [priority]="isPriorityImage">


        <!-- Wishlist Button (absolute) -->
        <button (click)="onWishlistToggle($event)" [class.text-red-500]="isWishlisted"
            [class.opacity-100]="isWishlisted" [class.translate-x-0]="isWishlisted"
            class="absolute top-3 right-3 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-white transition-all shadow-sm opacity-0 group-hover:opacity-100 translate-x-4 group-hover:translate-x-0 duration-300 z-10">
            <svg xmlns="http://www.w3.org/2000/svg" [class.fill-current]="isWishlisted" class="h-6 w-6" fill="none"
                viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
        </button>

        <!-- Category Badge -->
        <span
            class="absolute bottom-3 left-3 px-2 py-1 bg-white/90 backdrop-blur-sm rounded-md text-xs font-semibold text-slate-600 shadow-sm">
            {{ product.category.name }}
        </span>
    </div>

    <!-- Content -->
    <div class="p-5 flex-1 flex flex-col">
        <a [routerLink]="['/product', product._id]" class="block">
            <h3 class="text-lg font-bold text-slate-800 mb-1 leading-tight group-hover:text-primary transition-colors line-clamp-1"
                [title]="product.title">
                {{ product.title }}
            </h3>
        </a>

        <div class="flex items-center space-x-1 mb-3">
            <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20">
                <path
                    d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z" />
            </svg>
            <span class="text-sm font-medium text-slate-600">{{ product.ratingsAverage }}</span>
        </div>

        <div class="flex items-center justify-between mt-auto">
            <div class="flex flex-col">
                <span class="text-xs text-slate-400 font-medium">Price</span>
                <span class="text-xl font-bold text-slate-900">{{ product.price | currency }}</span>
            </div>

            <!-- Add to Cart Button -->
            <button (click)="addToCart($event)"
                class="p-3 bg-slate-900 text-white rounded-xl shadow-lg shadow-slate-900/20 hover:bg-primary hover:shadow-primary/30 active:scale-95 transition-all duration-300"
                title="Add to Cart">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                </svg>
            </button>
        </div>
    </div>
</div>