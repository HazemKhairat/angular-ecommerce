import{a as m}from"./chunk-B5HERMYD.js";import{a as $}from"./chunk-SPD2RTNC.js";import{a as R}from"./chunk-ECDCSSJU.js";import{k as M,q as V}from"./chunk-4UPO2QOB.js";import{$a as k,Ea as s,Gb as I,Pa as y,Ua as S,W as l,Y as w,Za as d,ab as W,bb as n,cb as r,db as c,eb as P,ga as u,ha as v,hb as x,ia as f,ib as p,ja as _,mb as a,na as b,nb as C,ob as T,rb as F,ub as E,vb as D}from"./chunk-2I6WSUOP.js";var L=(i,e)=>e._id;function O(i,e){i&1&&(n(0,"div",2)(1,"p"),a(2,"Loading wishlist..."),r()())}function z(i,e){i&1&&(n(0,"div",2)(1,"p",4),a(2,"Your wishlist is empty."),r()())}function B(i,e){if(i&1){let t=P();n(0,"div",5)(1,"button",6),x("click",function(){let h=u(t).$implicit,g=p(2);return v(g.removeFromWishlist(h._id))}),f(),n(2,"svg",7),c(3,"path",8),r()(),_(),c(4,"img",9),n(5,"h3",10),a(6),r(),n(7,"p",11),a(8),E(9,"currency"),r(),n(10,"div",12)(11,"span",13),f(),n(12,"svg",14),c(13,"path",15),r(),a(14),r(),_(),n(15,"button",16),x("click",function(){let h=u(t).$implicit,g=p(2);return v(g.addToCart(h._id))}),a(16,"Add to Cart"),r()()()}if(i&2){let t=e.$implicit,o=e.$index;s(4),S("ngSrc",t.imageCover)("alt",t.title)("priority",o<4),s(2),C(t.title),s(2),C(D(9,6,t.price)),s(6),T(" ",t.ratingsAverage," ")}}function N(i,e){if(i&1&&(n(0,"div",3),k(1,B,17,8,"div",5,L),r()),i&2){let t=p();s(),W(t.products)}}var j=class i{wishlistService=l($);cartService=l(R);cdr=l(I);destroyRef=l(b);products=[];loading=!0;ngOnInit(){this.loadWishlist()}loadWishlist(){this.loading=!0,this.wishlistService.getWishlist().pipe(m(this.destroyRef)).subscribe({next:e=>{this.products=e.data,this.loading=!1,this.cdr.markForCheck()},error:e=>{console.error("Failed to load wishlist",e),this.loading=!1,this.cdr.markForCheck()}})}removeFromWishlist(e){this.wishlistService.removeFromWishlist(e).pipe(m(this.destroyRef)).subscribe({next:()=>{this.products=this.products.filter(t=>t._id!==e),this.cdr.markForCheck()}})}addToCart(e){this.cartService.addToCart(e).pipe(m(this.destroyRef)).subscribe({next:()=>{alert("Product added to cart")}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=w({type:i,selectors:[["app-wishlist-page"]],standalone:!0,features:[F],decls:6,vars:3,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8"],[1,"text-center","py-10"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"text-gray-600","text-lg"],[1,"border","rounded-lg","p-4","shadow-sm","hover:shadow-md","transition-shadow","relative"],[1,"absolute","top-2","right-2","text-red-500","hover:text-red-700","p-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"],["width","300","height","200",1,"w-full","h-48","object-cover","object-center","mb-4","rounded",3,"ngSrc","alt","priority"],[1,"font-semibold","text-lg","truncate"],[1,"text-gray-600","mb-2"],[1,"flex","items-center","justify-between"],[1,"text-yellow-500","flex","items-center"],["viewBox","0 0 20 20",1,"w-4","h-4","fill-current","mr-1"],["d","M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"],[1,"bg-green-600","text-white","px-3","py-1","rounded","hover:bg-green-700","transition",3,"click"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"h1",1),a(2,"My Wishlist"),r(),y(3,O,3,0,"div",2)(4,z,3,0,"div",2)(5,N,3,0,"div",3),r()),t&2&&(s(3),d(o.loading?3:-1),s(),d(!o.loading&&o.products.length===0?4:-1),s(),d(!o.loading&&o.products.length>0?5:-1))},dependencies:[M,V],changeDetection:0})};export{j as WishlistPageComponent};
