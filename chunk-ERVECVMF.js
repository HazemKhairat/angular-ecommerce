import{a as E}from"./chunk-A3XTQVIB.js";import{a as g}from"./chunk-B5HERMYD.js";import{e as k}from"./chunk-NWWTS3XC.js";import"./chunk-4UPO2QOB.js";import{$a as h,Ea as r,Gb as S,Pa as p,W as l,Y as x,Za as a,ab as C,bb as d,cb as n,eb as b,ga as u,ha as v,hb as y,ib as m,mb as s,na as _,nb as f,ob as c,rb as A}from"./chunk-2I6WSUOP.js";var D=(t,i)=>i._id;function F(t,i){t&1&&(d(0,"div",4)(1,"p"),s(2,"Loading addresses..."),n()())}function T(t,i){t&1&&(d(0,"div",5)(1,"p",7),s(2,"No addresses found."),n()())}function R(t,i){if(t&1&&(d(0,"span"),s(1),n()),t&2){let e=m().$implicit;r(),c("- ",e.postalCode,"")}}function $(t,i){if(t&1){let e=b();d(0,"div",8)(1,"div")(2,"h3",9),s(3),n(),d(4,"p",10),s(5),n(),d(6,"p",11),s(7),p(8,R,2,1,"span"),n(),d(9,"p",11),s(10),n()(),d(11,"button",12),y("click",function(){let w=u(e).$implicit,I=m(2);return v(I.removeAddress(w._id))}),s(12," Remove "),n()()}if(t&2){let e=i.$implicit;r(3),f(e.alias),r(2),f(e.details),r(2),c("",e.city," "),r(),a(e.postalCode?8:-1),r(2),c("Phone: ",e.phone,"")}}function j(t,i){if(t&1&&(d(0,"div",6),h(1,$,13,5,"div",8,D),n()),t&2){let e=m();r(),C(e.addresses)}}var P=class t{addressService=l(E);cdr=l(S);destroyRef=l(_);addresses=[];loading=!0;ngOnInit(){this.loadAddresses()}loadAddresses(){this.loading=!0,this.addressService.getUserAddresses().pipe(g(this.destroyRef)).subscribe({next:i=>{this.addresses=i.data,this.loading=!1,this.cdr.markForCheck()},error:i=>{console.error("Error loading addresses",i),this.loading=!1,this.cdr.markForCheck()}})}removeAddress(i){confirm("Are you sure you want to delete this address?")&&this.addressService.removeAddress(i).pipe(g(this.destroyRef)).subscribe({next:e=>{this.addresses=e.data,this.cdr.markForCheck()}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=x({type:t,selectors:[["app-address-page"]],standalone:!0,features:[A],decls:9,vars:3,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],["routerLink","/address/add",1,"bg-blue-600","text-white","px-4","py-2","rounded","hover:bg-blue-700"],[1,"text-center","py-10"],[1,"text-center","py-10","border","rounded","bg-gray-50"],[1,"grid","gap-4"],[1,"text-gray-600","text-lg"],[1,"border","p-4","rounded","shadow-sm","flex","justify-between","items-start","bg-white"],[1,"font-bold","text-lg","mb-1"],[1,"text-gray-700"],[1,"text-gray-600"],[1,"text-red-500","hover:text-red-700","text-sm","font-semibold","border","border-red-200","px-3","py-1","rounded","hover:bg-red-50",3,"click"]],template:function(e,o){e&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"My Addresses"),n(),d(4,"a",3),s(5,"Add Address"),n()(),p(6,F,3,0,"div",4)(7,T,3,0,"div",5)(8,j,3,0,"div",6),n()),e&2&&(r(6),a(o.loading?6:-1),r(),a(!o.loading&&o.addresses.length===0?7:-1),r(),a(!o.loading&&o.addresses.length>0?8:-1))},dependencies:[k],changeDetection:0})};export{P as AddressPageComponent};
