import{r as c}from"./chunk-4UPO2QOB.js";import{D as n,L as o,N as i,Q as h,W as l,j as r,x as a}from"./chunk-2I6WSUOP.js";var p=class e{baseUrl="https://ecommerce.routemisr.com/api/v1/wishlist";http=l(c);wishlistCount=new r(0);wishlistList=new r([]);constructor(){a(2e3).pipe(o(()=>this.getWishlist()),n(1)).subscribe()}getWishlist(){return this.http.get(this.baseUrl).pipe(i(s=>{this.wishlistCount.next(s.count);let t=s.data.map(u=>u._id);this.wishlistList.next(t)}))}addToWishlist(s){return this.http.post(this.baseUrl,{productId:s}).pipe(i(t=>{this.wishlistCount.next(t.data.length),this.wishlistList.next(t.data)}))}removeFromWishlist(s){return this.http.delete(`${this.baseUrl}/${s}`).pipe(i(t=>{this.wishlistCount.next(t.data.length),this.wishlistList.next(t.data)}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})};export{p as a};
